name: Verifier_Data_Preparing
display_name: Verifier Data Preparing
version: 0.0.1
type: command
description: Verifier Data Preparing
tags: {category: Verifier Data Preparing, contact: v-yifeili@microsoft.com}
inputs:
  generator_result_file:
    type: path
    optional: false
    description: The generation result file generated by GPT-3 onebox or other modules
  diverse_prompt_data_file:
    type: path
    optional: false
    description: The diverse prompt data file that you inputed to the GPT-3 onebox generator
  random_seed:
    type: integer
    description: Random seed
    default: 233
  split:
    type: string
    description: Train / test split, with randomly shuffling train dataset but test dataset will not shuffled.
    default: train
outputs:
    output_file:
    type: path
    optional: false
    description: The output file path that you want to save the output data, which is the verifier training module's input.
code:
  local_path: ./src
environment:
  docker:
    image: pytorch/pytorch:1.6.0-cuda10.1-cudnn7-devel
  os: Linux
successful_return_code: Zero
meta:
  requireGpu: False
command: >-
  pip install -r requirements.txt &&
  python verifier_data_preparing.py
  --generator_result_file ${{inputs.generator_result_file}}
  --diverse_prompt_data_file ${{inputs.diverse_prompt_data_file}}
  --output_file ${{outputs.output_file}}
  --split ${{inputs.split}}
  --random_seed ${{inputs.random_seed}}
